import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
public class lecturaFitxerVirus extends Lectura {

    public Fitxer_Virus(String nom_fitxer) {
        super(nom_fitxer);
    }

    public Map<String, Familia> carregarFamilies() {
        // Pre: El fitxer d'entrada ha de tenir el format correcte.
        // Post: Retorna un mapa amb les famílies de virus llegides del fitxer.
        // El mapa té com a clau el nom de la família i com a valor l'objecte FamiliaVirus corresponent.
    
        Map<String, Familia> families = new HashMap<>();
        List<String> linies = llegirLinies();

        for (String liniaOriginal : linies) {
            String linia = liniaOriginal.trim();
        
            if (linia.equals("virus")) {
                break;
            }
        
            if (linia.startsWith("nom")) {
                String[] parts = linia.split("\\s+"); // Separem per espais
        
                if (parts.length >= 4) {
                    String nom = parts[1];
                    double tpc = Double.parseDouble(parts[2]);
                    double prob = Double.parseDouble(parts[3]);
        
                    families.put(nom, new Familia(nom, prob, tpc));
                }
            }
        }
        return families;